<!DOCTYPE html>
<head>
  <script src="/node_modules/angular/angular.min.js"></script>
  <script src="/view/scripts/app.js"></script>
  <script src="/view/scripts/AppCtrl.js"></script>
  <script src="/node_modules/angular-aria/angular-aria.min.js"></script>
  <script src="/node_modules/angular-animate/angular-animate.min.js"></script>
  <script src="/node_modules/angular-material/angular-material.min.js"></script>
  <script src="/node_modules/angular-material/angular-material.min.js"></script>
  <script src="/node_modules/angular-ui-bootstrap/dist/ui-bootstrap.js"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/node_modules/angular-material/angular-material.min.css">
  <link rel="stylesheet" type="text/css" href="/view/styles/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="/node_modules/angular-ui-bootstrap/dist/ui-bootstrap-csp.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>



<html>
<body ng-app="hhb">
  <div ng-controller="AppCtrl" ng-cloak ng-init="getDevices()">
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2 flex="40">
          <span>Seltzer Home</span>
          <md-button>
            <md-tooltip md-direction="bottom">
              Last contact: {{lastContact}}
            </md-tooltip>
            <md-icon ng-if="isReady() == true" class="material-icons">checkmark</md-icon>
            <md-icon ng-if="isReady() == false" class="material-icons">error</md-icon>
            {{status}} - {{getLiveStatus()}}
          </md-button>
        </h2>
        <span flex>
        </span>
        <md-button flex="nogrow" ng-click="setVacationMode()"href="/logs/hhb.log" target="_blank" aria-label="logs" >
          <md-icon ng-if="isReady() == true" class="material-icons">history</md-icon>
        </md-button>
        <md-button flex="nogrow" class="md-raised" ng-click="setVacationMode()" aria-label="toggle vacation mode">
          {{isVacationMode == true ? 'Vacation Mode':'Home Mode'}}
          <md-progress-linear ng-if="isSettingVacationMode" md-mode="indeterminate"></md-progress-linear>
        </md-button>
      </div>
    </md-toolbar>
    <div ng-repeat = 'device in devices'>
      <md-card>
        <md-card-title>
          <md-card-title-text>
            <span class="md-headline">{{device.deviceName}}</span>
          </md-card-title-text>
          <md-card-actions layout="row" layout-align="end center">
            <md-button disabled="true" class="md-primary">
              <md-icon ng-if="device.deviceAlerts != 'None'" class="material-icons">warning</md-icon>
              {{device.deviceAlerts}}</md-button>
            <md-button disabled="true" class="md-raised">
              <md-icon ng-if="device.alerts" class="material-icons">alarm</md-icon>
              {{device.deviceState}}</md-button>
          </md-card-actions>
        </md-card-title>

      </md-card>
    </div>
  <div>

</body>
</html>
